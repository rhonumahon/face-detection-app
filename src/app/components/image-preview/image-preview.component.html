<div class="container mt-4" *ngIf="image$ | async as image">
  <h3>Detection Results</h3>

  <div class="text-center" style="position: relative; display: inline-block;">
    <div class="image-wrapper">
      <img #imageElement [src]="image" class="img-fluid" alt="Detected Image" [class.loading]="isLoading$ | async" />
    </div>

    <div *ngIf="isLoading$ | async" class="loading-overlay">
      <div class="scanner-line"></div>
    </div>

    <canvas #canvas style="position: absolute; top: 0; left: 0; pointer-events: none;"></canvas>
  </div>

  <div *ngIf="detectionResults$ | async as detectionResults; else noResults" class="text-center mt-3">
    <p>Age: {{ detectionResults.age }}, Gender: {{ detectionResults.gender }}</p>
  </div>

  <ng-template #loadingTemplate>
    <div class="loading-spinner">
      <div class="spinner"></div>
    </div>
  </ng-template>

  <ng-template #noResults>
    <p>No faces detected. Please try another image.</p>
  </ng-template>
</div>

<div *ngIf="errorMessage" class="error-message text-danger">
  <p>{{ errorMessage }}</p>
</div>
